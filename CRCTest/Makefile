INCFLAGS = -I..
DEF_WORK_DIR = -DWORK_DIR=\"../../WorkData\"
DEBUG_CC_FLAGS = $(INCFLAGS) -c -g -D_DEBUG -Wno-unknown-pragmas $(DEF_WORK_DIR)
RELEASE_CC_FLAGS = $(INCFLAGS) -c -O3 -DNDEBUG -Wno-unknown-pragmas $(DEF_WORK_DIR)
DEBUG_TARGET_DIR = ../debug
RELEASE_TARGET_DIR = ../release
DEBUG_OBJECT_DIR = $(DEBUG_TARGET_DIR)/o
RELEASE_OBJECT_DIR = $(RELEASE_TARGET_DIR)/o
DEBUG_TARGET = $(DEBUG_TARGET_DIR)/CRCTest.exe
RELEASE_TARGET = $(RELEASE_TARGET_DIR)/CRCTest.exe
DEBUG_LIBS = -L$(DEBUG_TARGET_DIR) -lbase -pthread
RELEASE_LIBS = -L$(RELEASE_TARGET_DIR) -lbase -pthread
DEBUG_OBJECTS = \
	$(DEBUG_OBJECT_DIR)/CRCTest.o \
	$(DEBUG_OBJECT_DIR)/CRCTestLib.o

.PHONY	:	debug
debug	:	$(DEBUG_TARGET)

$(DEBUG_TARGET)	:	$(DEBUG_OBJECTS)
	$(CC) -o $@ $^ $(DEBUG_LIBS)

$(DEBUG_OBJECT_DIR)/CRCTest.o	:	CRCTest.c
	$(CC) $(DEBUG_CC_FLAGS) -o $@ $<

$(DEBUG_OBJECT_DIR)/CRCTestLib.o	:	CRCTestLib.c CRCTestLib.h
	$(CC) $(DEBUG_CC_FLAGS) -o $@ $<

.PHONY	:	clean_debug
clean_debug	:
	rm -f $(DEBUG_OBJECTS)
	rm -f $(DEBUG_TARGET)
