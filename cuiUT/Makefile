INCFLAGS = -I..
DEF_WORK_DIR = -DWORK_DIR=\"../../WorkData\"
DEBUG_CC_FLAGS = $(INCFLAGS) -c -g -D_DEBUG -Wno-unknown-pragmas $(DEF_WORK_DIR)
RELEASE_CC_FLAGS = $(INCFLAGS) -c -O3 -DNDEBUG -Wno-unknown-pragmas $(DEF_WORK_DIR)
DEBUG_TARGET_DIR = ../debug
RELEASE_TARGET_DIR = ../release
DEBUG_OBJECT_DIR = $(DEBUG_TARGET_DIR)/o
RELEASE_OBJECT_DIR = $(RELEASE_TARGET_DIR)/o
DEBUG_TARGET = $(DEBUG_TARGET_DIR)/cuiUT.exe
RELEASE_TARGET = $(RELEASE_TARGET_DIR)/cuiUT.exe
DEBUG_OBJECTS = \
	$(DEBUG_OBJECT_DIR)/cuiUT.o
RELEASE_OBJECTS = \
	$(RELEASE_OBJECT_DIR)/cuiUT.o

.PHONY	:	debug
debug	:	$(DEBUG_TARGET)

$(DEBUG_TARGET)	:	$(DEBUG_OBJECTS) $(DEBUG_TARGET_DIR)/libcui.a
	$(CC) -o $@ $(DEBUG_OBJECTS) -L$(DEBUG_TARGET_DIR) -lcui -lbase -lpthread

$(DEBUG_OBJECT_DIR)/cuiUT.o	:	cuiUT.c
	mkdir -p $(DEBUG_OBJECT_DIR)
	$(CC) $(DEBUG_CC_FLAGS) -o $@ $<

.PHONY	:	clean_debug
clean_debug	:
	rm -f $(DEBUG_TARGET)
	rm -f $(DEBUG_OBJECTS)

